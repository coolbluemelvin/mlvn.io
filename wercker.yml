box: debian
build:
    # Steps make up the actions in your pipeline
    # Read more about steps on our dev center:
    # https://devcenter.wercker.com/development/steps/

  steps:
    - install-packages:
        packages: git
    - script:
        name: download hugo theme
        cwd: mlvn.io/themes
        code: git clone https://github.com/rhazdon/hugo-theme-hello-friend-ng.git hello-friend-ng
    - arjen/hugo-build:
        basedir: "mlvn.io"
        version: "0.53"
        theme: hello-friend-ng
        flags: --buildDrafts=true

deploy:
  steps:
    - install-packages:
        packages: git ssh-client
    - lukevivier/gh-pages@0.2.1:
        token: $GIT_TOKEN
        domain: mlvn.io
        basedir: public
